/**
 * @version $Id$
 * @package DJ-MediaTools
 * @subpackage DJ-MediaTools mslider layout
 * @copyright Copyright (C) 2017 DJ-Extensions.com, All rights reserved.
 * @license DJ-Extensions.com Proprietary Use License
 * @author url: http://dj-extensions.com
 * @author email contact@dj-extensions.com
 * @developer Szymon Woronowski - szymon.woronowski@design-joomla.eu
 *
 */
!function(l){var i=window.DJImageMslider=window.DJImageMslider||function(i,e){this.options={autoplay:0,transition:"linear",duration:800,delay:3e3,ifade_multiplier:2,visible:3,lag:100,wcag:1},this.init(i,e)};i.prototype=Object.create(DJImageSlideshow.prototype),i.prototype.init=function(i,e){var s=this;jQuery.extend(s.options,e),s.sliderIn=l("#"+i).find(".dj-mslider-in").first(),s.setVisible(),DJImageSlideshow.prototype.init.call(s,i,e)},i.prototype.setEffectsOptions=function(){var i=this;switch(DJImageSlideshow.prototype.setEffectsOptions.call(i),i.options.slider_type){case"up":case"down":i.options.lag&&(i.startEffect.top*=2,i.backEffect.top*=2);break;case"left":case"right":i.startEffect.left="100%",i.backEffect.left="-100%",i.endEffect.left="0%",i.options.lag&&(i.startEffect.left="200%",i.backEffect.left="-200%")}if(i.options.desc_effect)switch(i.options.desc_effect){case"left":case"right":i.desc_startEffect.marginLeft*=i.visible}},i.prototype.loadFirstSlide=function(){var s=this;s.slider.find(".dj-slides").first().css("opacity",0);for(var t=0;t<s.visible;t++)if(s.exist(t)){var i=l(s.slides[t]).find("img.dj-image").first(),o=function(i,e){1<i.length&&(i[1],i=i[0]),i.off("load",o),s.firstSlideLoaded(t)}.bind(s,[i,t]);i.on("load",o),s.preloadImage(t,!1)}},i.prototype.firstSlideLoaded=function(){var i=this;if(i.loading){for(var e=0;e<i.visible;e++)if(!i.slides[e].loaded)return;i.loader.fadeOut(200),i.slider.find(".dj-slides").first().animate({opacity:1},200),setTimeout(function(){i.autoPlay()},i.options.delay+500);for(e=i.visible;e<2*i.visible;e++)i.exist(e)&&i.preloadImage(e,!1);i.loading=0,i.options.kenburns&&i.slider.addClass("dj-kenburns")}},i.prototype.setSlidesEffects=function(){var i=this,e=i.options.width*i.visible+i.options.spacing*(i.visible-1),s=100*i.options.width/e,t=100*(i.options.width+i.options.spacing)/e;i.slides.css("width",s+"%");for(var o=0;o<i.slides.length;o++)o>=i.current&&o<i.current+i.visible?(l(i.slides[o]).css("visibility",""),l(i.slides[o]).css(i.endEffect)):(l(i.slides[o]).css("visibility","hidden"),l(i.slides[o]).css(i.startEffect)),l(i.slides[o]).css("margin-left",t*(o%i.visible)+"%");if("ifade"==i.options.slider_type){i.images=[];var r=!!i.transform&&i.transform+" "+i.options.duration/2+"ms cubic-bezier(0.190, 1.000, 0.220, 1.000)";for(o=0;o<i.slides.length;o++)i.images[o]=l(i.slides[o]).find(".dj-image").first(),i.images[o].length&&(r?(i.images[o].css(i.transition,r),o>=i.current&&o<i.current+i.visible?i.images[o].css(i.transform,"scale(1)"):i.images[o].css(i.transform,"scale("+i.options.ifade_multiplier+")")):i.images[o].css("max-width","none"))}if(i.options.desc_effect)for(o=0;o<i.descriptions.length;o++)o>=i.current&&o<i.current+i.visible?(l(i.descriptions[o]).css("visibility",""),l(i.descriptions[o]).css(i.desc_endEffect)):(l(i.descriptions[o]).css("visibility","hidden"),l(i.descriptions[o]).css(i.desc_startEffect))},i.prototype.setIndicators=function(){var e=this;DJImageSlideshow.prototype.setIndicators.call(e),e.indicators.length&&e.indicators.each(function(i){indicator=l(this),i>=e.indicators.length/e.visible?indicator.css("display","none"):indicator.css("display","")})},i.prototype.loadSlide=function(i){var s=this;if(s.current!=i&&!s.loading){for(var e=!0,t=i;t<i+s.visible;t++){if(s.exist(t))l(s.slides[t]).find("img.dj-image").first().length&&!s.slides[t].loaded&&(s.preloadImage(t,!0),e=!1)}if(e){s.slider.find(".dj-slides").first().css("min-height","");var o=s.current,r=0;for(t=0;t<s.visible;t++)setTimeout(function(i,e){1<i.length&&(e=i[1],i=i[0]),s.slide(i,e)}.bind(s,[o+t,i+t]),t*s.options.lag),l(s.slides[i+t]).outerHeight()>r&&(r=l(s.slides[i+t]).outerHeight());s.slider.find(".dj-slides").first().css("min-height",r);for(t=i+s.visible;t<i+2*s.visible;t++)s.exist(t)&&s.preloadImage(t,!1);s.setCurrentSlide(i)}}},i.prototype.setCurrentSlide=function(i){var e=this;DJImageSlideshow.prototype.setCurrentSlide.call(e,i),e.slides.removeClass("dj-visible");for(var s=i;s<i+e.visible;s++)e.exist(s)&&l(e.slides[s]).addClass("dj-visible")},i.prototype.responsive=function(){var e=this,i=e.visible;if(e.setVisible(),i!=e.visible){e.last=e.slides.length-e.slides.length%e.visible,e.last==e.slides.length&&(e.last-=e.visible),e.indicators.length&&e.indicators.each(function(i){indicator=l(this),i>=e.indicators.length/e.visible?indicator.css("display","none"):indicator.css("display","")});var s=e.current-e.current%e.visible;s>e.last&&(s=e.last),e.setCurrentSlide(s),e.setSlidesEffects()}e.slider.find(".dj-slides").first().css("min-height","");for(var t=0,o=0;o<e.visible;o++)l(e.slides[e.current+o]).outerHeight()>t&&(t=l(e.slides[e.current+o]).outerHeight());e.slider.find(".dj-slides").first().css("min-height",t),e.slides.removeClass("dj-visible");for(o=e.current;o<e.current+e.visible;o++)e.exist(o)&&l(e.slides[o]).addClass("dj-visible");DJImageSlideshow.prototype.responsive.call(e)},i.prototype.setVisible=function(){var i=this,e=i.getSize(i.sliderIn).x;i.visible=Math.ceil((e+i.options.spacing)/(i.options.width+i.options.spacing))},i.prototype.toggleVideo=function(i){for(var e=this,s=e.current;s<e.current+e.visible;s++){if(e.exist(s))(t=l(e.slides[s]).find(".video_cover video, .video_cover iframe")).length&&e.pauseVideo(t),(t=l(e.slides[s]).find(".full_video")).length&&e.pauseVideo(t)}for(s=i;s<i+e.visible;s++){var t;if(e.exist(s))(t=l(e.slides[s]).find(".video_cover video, .video_cover iframe")).length&&e.playVideo(t),(t=l(e.slides[s]).find(".full_video.play")).length&&e.playVideo(t)}}}(jQuery);